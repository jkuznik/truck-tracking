<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="
        http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">

    <!-- Change the data type of business_id to UUID -->
    <changeSet id="5" author="jkuznik">
        <sql>
            ALTER TABLE trailer
                ALTER COLUMN business_id SET DATA TYPE UUID
                USING business_id::uuid;

            ALTER TABLE trailer
                ALTER COLUMN current_truck_business_id SET DATA TYPE UUID
                USING current_truck_business_id::uuid;

            ALTER TABLE truck
                ALTER COLUMN business_id SET DATA TYPE UUID
                USING business_id::uuid;

            ALTER TABLE truck
                ALTER COLUMN current_trailer_business_id SET DATA TYPE UUID
                USING current_trailer_business_id::uuid;
        </sql>
    </changeSet>

</databaseChangeLog>